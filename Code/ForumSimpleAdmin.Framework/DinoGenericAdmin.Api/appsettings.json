{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "NLog": {
    "autoReload": true,
    "throwConfigExceptions": true,
    "internalLogLevel": "Warn",
    "internalLogFile": "${basedir}/internal-nlog.txt",
    "extensions": [
      { "assembly": "NLog.Web.AspNetCore" }
      //{ "assembly": "NLog.Extensions.AzureDataTables" }
    ],
    "variables": {
      "var_logdir": "c:/Logs/DinoGenericAdmin/",
      "env_name": "Dev"
    },
    "targets": {
      "allFile": {
        "type": "File",
        "fileName": "${var_logdir}/${env_name}/nlog-all-${shortdate}.log",
        "layout": "${longdate}|${event-properties:item=EventId:whenEmpty=0}|${level:uppercase=true}|${logger}|${message} ${exception:format=tostring}"
      },
      "ownFile": {
        "type": "File",
        "fileName": "${var_logdir}/${env_name}/nlog-own-${shortdate}.log",
        "layout": "${longdate}|${event-properties:item=EventId:whenEmpty=0}|${level:uppercase=true}|${logger}|${message} ${exception:format=tostring}|url: ${aspnet-request-url}|action: ${aspnet-mvc-action}|${callsite}"
      },
      "lifetimeConsole": {
        "type": "LimitingWrapper",
        "interval": "00:00:01",
        "messageLimit": 100,
        "target": {
          "type": "ColoredConsole",
          "layout": "${longdate}|${event-properties:item=EventId_Id:whenEmpty=0}|${uppercase:${level}}|${logger}|${message} ${exception:format=tostring}|${callsite}",
          "rowHighlightingRules": [
            {
              "condition": "level == LogLevel.Error",
              "foregroundColor": "Red"
            },
            {
              "condition": "level == LogLevel.Fatal",
              "foregroundColor": "Red",
              "backgroundColor": "White"
            }
          ],
          "wordHighlightingRules": [
            {
              "regex": "on|off",
              "foregroundColor": "DarkGreen"
            },
            {
              "condition": "level == LogLevel.Debug",
              "text": "[TEST]",
              "foregroundColor": "Blue"
            }
          ]
        }
      }
      //"azureTableOwn": {
      //  "type": "AzureDataTables",
      //  "connectionString": "${configsetting:ConnectionStrings.AzureStorage}",
      //  "tableName": "NLogApiLogsOwn${env_name}",
      //  "layout": "${longdate}|${event-properties:item=EventId:whenEmpty=0}|${level:uppercase=true}|${logger}|${message} ${exception:format=tostring}|url: ${aspnet-request-url}|action: ${aspnet-mvc-action}|${callsite}"
      //},
      //"azureTableAll": {
      //  "type": "AzureDataTables",
      //  "connectionString": "${configsetting:ConnectionStrings.AzureStorage}",
      //  "tableName": "NLogApiLogsAll${env_name}",
      //  "layout": "${longdate}|${event-properties:item=EventId:whenEmpty=0}|${level:uppercase=true}|${logger}|${message} ${exception:format=tostring}"
      //}
    },
    "rules": [
      {
        "logger": "*",
        "minLevel": "Warning",
        "writeTo": "allFile"
      },
      {
        "logger": "Microsoft.Hosting.Lifetime",
        "minLevel": "Warning",
        "writeTo": "lifetimeConsole, ownFile",
        "filterDefaultAction": "Log",
        "filters": {
          "whenRepeated": {
            "layout": "${message}",
            "action": "Ignore"
          }
        },
        "final": true
      },
      {
        "logger": "Microsoft.*",
        "maxLevel": "Info",
        "final": true
      },
      {
        "logger": "System.Net.Http.*",
        "maxLevel": "Info",
        "final": true
      },
      {
        "logger": "*",
        "minLevel": "Warning",
        "writeTo": "ownFile"
      }
    ]
  },
  "AllowedHosts": "*",
  "ConnectionStrings": {
    "MainDbContext": "Server=app.devdino.com\\dev,49299;Database=dino_admin_core_demo;user id=sa;password=iR6%k&32l@5W;TrustServerCertificate=True"
  },
  "Hangfire": {
    "ConnectionString": "Server=app.devdino.com\\dev,49299;Database=dino_admin_core_demo;user id=sa;password=iR6%k&32l@5W;TrustServerCertificate=True",
    "DashboardAllowedIps": ["127.0.0.1", "::1"],
    "EnableProcessing": true,
    "EnableDashboard": true,
    "DashboardPath": "/hangfire",
    "Queues": ["critical", "emails", "default"],
    "CompatibilityLevel": 180,
    "CreateDatabaseTablesIfNotExist": true
  },
  "AdminConfig": {
    "AllowHebrew": true,
    "AllowEnglish": true,
    "NewServerUrl": "",
    "LoginSecurityConfig": {
      "RequireOtpOnLogin": true,
      "OtpExpiryMinutes": 15,
      "OtpLength": 6
    }
  },
  "ApiConfig": {
    "ClientBaseUrl": "",
    "ApiBaseUrl": "https://localhost:44330/",
    "UploadsFolder": "uploads",
    "AllowCorsOrigins": "https://localhost:4200;https://localhost:4201",
    "DateTimeStringFormat": "yyyy-MM-dd HH:mm:ss",
    "ServiceSettings": {
      "DisableServices": true
    }
  },
  "BlConfig": {
    "DebugMode": true,
    "EmailsConfig": {
      "SmtpServer": "smtp.eu.mailgun.org",
      "SmtpPort": 587,
      "SmtpUsername": "postmaster@mg2.devdino.com",
      "SmtpPassword": "",
      "FromEmail": "office@devdino.com",
      "FromName": "Adminosaurus by Dino"
    },
    "StorageConfig": {
      "UseAzureBlob": false,
      "AzureBlobConnectionString": "",
      "AzureBlobContainerName": "",
      "AzureBlobBaseUrl": ""
    },
    "CacheConfig": {
      "UseRedis": false,
      "RedisHost": "localhost",
      "RedisPort": 6379,
      "RedisPassword": "",
      "RedisDatabase": 0,
      "DefaultExpiration": "00:30:00"
    }
  }
}
